<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<div th:insert="~{usuarios/template_usuario :: header}"></div>

<body>

  <!-- Navigation -->
  <div th:insert="~{usuarios/template_usuario :: nav}"></div>
  <!-- Page Content -->
  <div class="container">
    <br><br>
    <h2>Actualizar producto</h2>

    <form class="form-horizontal" th:action="@{/productos/actualizar}" method="post" enctype="multipart/form-data">
      <input type="hidden" name="id" th:value="${producto.id}">

      <div class="row">

        <div class="col-lg-8">
          <div class="card mb-4">
            <div class="card-body">
              <div class="form-group">
                <h6 class="control-label col-sm-2" for="nombre" style="max-width: 100%;">Título:</h6>
                <div class="col-sm-10">
                  <input type="text" class="form-control" id="nombre" name="nombre"
                    placeholder="Ingrese el nombre del producto" required autocomplete="off"
                    th:value="${producto.nombre}">
                  <div id="prueba"></div>
                </div>
              </div>

              <div class="form-group">
                <h6 class="control-label col-sm-2" for="descripcion" style="max-width: 100%;">Descripción:</h6>
                <div class="col-sm-10">
                  <textarea class="form-control" id="descripcion" name="descripcion"
                    placeholder="Ingrese la descripcion del producto" required autocomplete="off"
                    th:text="${producto.descripcion}"> </textarea>
                </div>
              </div>

              <div class="form-group">
                <h6 class="control-label col-sm-2" for="precio" style="max-width: 100%;">Precio:</h6>
                <div class="col-sm-10">
                  <input type="number" class="form-control" step="any" id="precio" name="precio"
                    placeholder="Ingrese el precio del producto" th:value="${producto.precio}" required
                    autocomplete="off">
                </div>
              </div>

              <div class="form-group">
                <h6 class="control-label col-sm-2" for="categoria" style="max-width: 100%;">Categoría:</h6>
                <div class="form-check form-check-inline" style="margin-left: 17px;">
                  <input class="form-check-input" type="radio" name="categoria" id="inlineRadio1" value="1"
                    th:checked="${producto.categoria == 1}">
                  <label class="form-check-label" for="inlineRadio1">Totebag</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="categoria" id="inlineRadio2" value="2"
                    th:checked="${producto.categoria == 2}">
                  <label class="form-check-label" for="inlineRadio2">Mochila</label>
                </div>
              </div>




              <div class="form-group">
                <h6 class="control-label col-sm-2" for="activo" style="max-width: 100%;">Activo:</h6>
                <div class="form-check form-check-inline" style="margin-left: 17px;">
                  <input class="form-check-input" type="radio" name="activo" id="inlineRadio1" value="true"
                    th:checked="${producto.activo == true}">
                  <label class="form-check-label" for="inlineRadio1">Si</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="activo" id="inlineRadio2" value="false"
                    th:checked="${producto.activo == false}">
                  <label class="form-check-label" for="inlineRadio2">No</label>
                </div>
              </div>

              <div class="row" style="text-align-last: right;">
                <div class="col-sm-2">
                  <button type="submit" class="btn btn-dark" style="margin-top: 10px;"> Guardar</button>
                </div>
              </div>

            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="row">
            <div class="card mb-4">
              <div class="card-body" style="width: 300px;">
                <div class="form-group">
                  <h6 class="control-label col-sm-2 card-title" for="img1" style="max-width: 100%;">Portada:</h6>
                  <div class="col-sm-10 d-flex align-items-center">
                    <label for="img1" style="cursor: pointer;">
                      <img id="img1-preview" th:src="@{/images/{img} (img = ${producto.portada})}" alt="Vista previa"
                        style="max-width: 100px; margin-left: 50px; margin-top: 10px;">
                    </label>
                    <input type="file" class="form-control-file" id="img1" name="img1"
                      onchange="previewImage(event, 'img1-preview')" style="display: none;">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="card mb-4">
              <div class="card-body" style="width: 300px;">
                <div class="form-group">
                  <h6 class="control-label col-sm-2 card-title" for="img1" style="max-width: 100%;">Imagen 1:</h6>
                  <div class="col-sm-10 d-flex align-items-center">
                    <label for="img2" style="cursor: pointer;">
                      <img id="img2-preview" th:src="@{/images/{img} (img = ${producto.imagen1})}" alt="Vista previa"
                        style="max-width: 100px; margin-left: 50px; margin-top: 10px;">
                    </label>
                    <input type="file" class="form-control-file" id="img2" name="img2"
                      onchange="previewImage(event, 'img2-preview')" style="display: none;">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="card mb-4">
              <div class="card-body" style="width: 300px;">
                <div class="form-group">
                  <h6 class="control-label col-sm-2 card-title" for="img1" style="max-width: 100%;">Imagen 2:</h6>
                  <div class="col-sm-10 d-flex align-items-center">
                    <label for="img3" style="cursor: pointer;">
                      <img id="img3-preview" th:src="@{/images/{img} (img = ${producto.imagen2})}" alt="Vista previa"
                        style="max-width: 100px; margin-left: 50px; margin-top: 10px;">
                    </label>
                    <input type="file" class="form-control-file" id="img3" name="img3"
                      onchange="previewImage(event, 'img3-preview')" style="display: none;">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <!-- /.container -->

  <script>
    function previewImage(event, previewId) {
      var reader = new FileReader();
      reader.onload = function () {
        var output = document.getElementById(previewId);
        output.src = reader.result;
        output.style.display = 'block';
        var filenameSpan = document.getElementById(previewId + '-filename');
        filenameSpan.style.display = 'none'; // Oculta el nombre del archivo cuando se carga la imagen
      }
      reader.readAsDataURL(event.target.files[0]);
    }
  </script>

  <!-- Footer -->
  <div th:insert="~{usuarios/template_usuario :: footer}"></div>

  <!-- Scripts -->
  <div th:insert="~{usuarios/template_usuario :: scripts}"></div>

</body>

</html>